add checks for every script, so that things dont get done twice

add more consistent variable checks

better error handling

test
